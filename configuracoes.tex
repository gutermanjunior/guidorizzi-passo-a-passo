% =========================================================
% CONFIGURAÇÕES GERAIS DO LIVRO DE CÁLCULO 1
% =========================================================

\ifdefined\chapter
\else
  \documentclass[12pt,a4paper]{book}
  \def\compilandoisolado{1}
\fi

% =========================================================
% 1. PACOTES ESSENCIAIS
% =========================================================

\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[brazil]{babel}
\usepackage[a4paper, margin=1.5cm]{geometry}
\setlength{\headheight}{13pt}
\usepackage{microtype}
\usepackage{amsmath, amssymb, amsfonts}
\usepackage{graphicx}
\usepackage{xcolor}
\usepackage{tikz}
\usepackage{titlesec}
\usepackage{makeidx}
\makeindex
\usepackage{setspace}
\usepackage{xparse}
\usepackage[most]{tcolorbox}
\usepackage{enumitem}
\usepackage{fancyhdr}

% =========================================================
% CABEÇALHO E RODAPÉ
% =========================================================

\pagestyle{fancy}
\fancyhf{}

\fancyhead[LE, RO]{\textbf{\thepage}}
\fancyhead[RE]{\textit{\leftmark}}
\fancyhead[LO]{\textit{\rightmark}}

\renewcommand{\headrulewidth}{0.4pt}
\renewcommand{\footrulewidth}{0pt}

\fancypagestyle{plain}{
    \fancyhf{}
    \fancyfoot[C]{\textbf{\thepage}}
    \renewcommand{\headrulewidth}{0pt}
}

% =========================================================
% METADADOS
% =========================================================

\newcommand{\thetitle}{Cálculo 1}
\newcommand{\thesubtitle}{Números Reais e Funções Básicas}
\newcommand{\theauthor}{Prof. Guterman Junior}
\newcommand{\thedate}{19 de fevereiro 2026}

% =========================================================
% HYPERREF
% =========================================================

\usepackage[
    colorlinks=true,
    linkcolor=corprincipal,
    filecolor=magenta,
    urlcolor=cyan,
    pdftitle={\thetitle},
    pdfauthor={\theauthor},
    breaklinks=true,
]{hyperref}

\newcommand{\targetex}[2]{\hypertarget{sol:#1:#2}{}}

% =========================================================
% IDENTIDADE VISUAL (CORES)
% =========================================================

\definecolor{corprincipal}{RGB}{18, 45, 105}
\definecolor{corsecundaria}{RGB}{0, 150, 136}
\definecolor{corclara}{RGB}{220, 230, 240}
\definecolor{corpasso}{RGB}{245, 245, 210}

% =========================================================
% TIPOGRAFIA
% =========================================================

\singlespacing
\raggedbottom
\setlength{\parindent}{0pt}
\setlength{\parskip}{0.2em}
\setlist[itemize]{label=-, nosep, leftmargin=*}

% =========================================================
% FORMATAÇÃO DE TÍTULOS
% =========================================================

\titleformat{\chapter}
  {\normalfont\huge\bfseries\color{corprincipal}}
  {\thechapter}{1em}{}
  [\vspace{1ex}\titlerule]

% =========================================================
% CAIXAS E AMBIENTES
% =========================================================

\newcommand{\registrasolucao}[3]{
    \vspace{0.5em}
    \targetex{#1}{#2}
    \noindent\fcolorbox{black!20}{black!5}{%
        \parbox{\dimexpr\textwidth-2\fboxsep-2\fboxrule\relax}{%
            \textbf{Exercício #2} (Seção #1)
        }%
    }\par\vspace{0.2em}
    #3
    \vspace{0.3em}
}

\newenvironment{resumocapitulo}
  {\vspace{0.5em}\begin{quote}\itshape}
  {\end{quote}\vspace{0.5em}}

\newtcolorbox{atencao}{
    colback=red!5,
    colframe=red!75!black,
    title=\textbf{Cuidado!},
    arc=2mm,
    boxrule=0.5mm
}

\newenvironment{passo}[1]
  {\par\vspace{0.2em}\noindent\textbf{Passo #1}\par\noindent}
  {\par}

% =========================================================
% CAPA MODERNA ESTILO EDITORIAL
% =========================================================

\newcommand{\makemytitle}{
\begin{titlepage}

\begin{tikzpicture}[remember picture, overlay]

    % Fundo branco
    \fill[white] 
    (current page.north west) rectangle (current page.south east);

    % Faixa lateral forte
    \fill[corprincipal] 
    (current page.north west) rectangle ([xshift=4cm]current page.south west);

    % Elemento geométrico inferior
    \fill[corprincipal!15] 
    (current page.south west) 
    -- ++(8cm,0) 
    -- ++(0,4cm) 
    -- cycle;

\end{tikzpicture}

\vspace*{3cm}

\hspace*{4.8cm}
\begin{minipage}{0.6\textwidth}

{\Huge\bfseries\color{corprincipal} \thetitle}

\vspace{0.4cm}

{\Large\color{black!70} \thesubtitle}

\vspace{1.5cm}

{\large\textbf{\theauthor}}

\vspace{0.2cm}

{\normalsize\thedate}

\vfill

{\small\color{black!60}
Material didático desenvolvido para estudo estruturado e progressivo.
}

\end{minipage}

\end{titlepage}
}

% =========================================================
% PREVIEW ISOLADO
% =========================================================

\ifdefined\compilandoisolado
  \begin{document}
  \makemytitle
  \end{document}
\fi